function LerpSmooth1D(t,n,a,r,o,M){return M||a<=Math.PI*(o?.5:1)?(a+=r,[(Math.sin(a+1.5*Math.PI)+1)*((n-t)/(o?1:2))+t,a]):[n,a]}function fractionalLine(t,n,a,r){if(a<=0||r<0||r>=a)return[t.x,t.y,n.x,n.y];let o=(n.x-t.x)/a,M=(n.y-t.y)/a;return[o*r+t.x,M*r+t.y,o*(r+1)+t.x,M*(r+1)+t.y]}function euclideanDistance(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function eulerStep(t,n,a,r,o){for(let M=1;M<=8;M++){let h=1/M,e=acceleration(n,t,o),c=acceleration(t,n,o);a={x:a.x+e.x*h,y:a.y+e.y*h},r={x:r.x+c.x*h,y:r.y+c.y*h},t={x:t.x+a.x*h,y:t.y+a.y*h},n={x:n.x+r.x*h,y:n.y+r.y*h}}return[t,n,a,r]}function acceleration(t,n,a){let r=t.x-n.x,o=t.y-n.y,M=Math.sqrt(r*r+o*o),h=a/(M*M);return{x:r/M*h,y:o/M*h}}function matMul(t,n){if(t[0].length!=n.length)return null;for(var a=new Array(t.length),r=0;r<t.length;r++){a[r]=new Array(n[0].length);for(var o=0;o<n[0].length;o++){for(var M=0,h=0;h<t[0].length;h++)M+=t[r][h]*n[h][o];a[r][o]=M}}return a}function rotateX3(t,n){return matMul([[1,0,0],[0,Math.cos(n),-Math.sin(n)],[0,Math.sin(n),Math.cos(n)]],t)}function rotateY3(t,n){return matMul([[Math.cos(n),0,Math.sin(n)],[0,1,0],[-Math.sin(n),0,Math.cos(n)]],t)}function rotateZ3(t,n){return matMul([[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]],t)}function rotateX4(t,n){return matMul([[1,0,0,0],[0,Math.cos(n),-Math.sin(n),0],[0,Math.sin(n),Math.cos(n),0],[0,0,0,1]],t)}function rotateY4(t,n){return matMul([[Math.cos(n),0,Math.sin(n),0],[0,1,0,0],[-Math.sin(n),0,Math.cos(n),0],[0,0,0,1]],t)}function rotateZ4(t,n){return matMul([[Math.cos(n),-Math.sin(n),0,0],[Math.sin(n),Math.cos(n),0,0],[0,0,1,0],[0,0,0,1]],t)}function rotateZW4(t,n){return matMul([[Math.cos(n),-Math.sin(n),0,0],[Math.sin(n),Math.cos(n),0,0],[0,0,1,0],[0,0,0,1]],t)}function rotateYW4(t,n){return matMul([[Math.cos(n),0,-Math.sin(n),0],[0,1,0,0],[Math.sin(n),0,Math.cos(n),0],[0,0,0,1]],t)}function rotateYZ4(t,n){return matMul([[Math.cos(n),0,0,-Math.sin(n)],[0,1,0,0],[0,0,1,0],[Math.sin(n),0,0,Math.cos(n)]],t)}function rotateXW4(t,n){return matMul([[1,0,0,0],[0,Math.cos(n),-Math.sin(n),0],[0,Math.sin(n),Math.cos(n),0],[0,0,0,1]],t)}function rotateXZ4(t,n){return matMul([[1,0,0,0],[0,Math.cos(n),0,-Math.sin(n)],[0,0,1,0],[0,Math.sin(n),0,Math.cos(n)]],t)}function rotateXY4(t,n){return matMul([[1,0,0,0],[0,1,0,0],[0,0,Math.cos(n),-Math.sin(n)],[0,0,Math.sin(n),Math.cos(n)]],t)}const project3=t=>[[t,0,0,0],[0,t,0,0],[0,0,t,0]],project4=t=>[[t,0,0],[0,t,0]];
